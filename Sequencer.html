<html xmlns:v="urn:schemas-microsoft-com:vml"
xmlns:o="urn:schemas-microsoft-com:office:office"
xmlns:w="urn:schemas-microsoft-com:office:word"
xmlns:st1="urn:schemas-microsoft-com:office:smarttags"
xmlns="http://www.w3.org/TR/REC-html40">

<head>
<meta http-equiv=Content-Type content="text/html; charset=iso-8859-1">
<meta name=ProgId content=Word.Document>
<meta name=Generator content="Microsoft Word 11">
<meta name=Originator content="Microsoft Word 11">
<link rel=File-List href="Sequencer_files/filelist.xml">
<link rel=Edit-Time-Data href="Sequencer_files/editdata.mso">
<!--[if !mso]>
<style>
v\:* {behavior:url(#default#VML);}
o\:* {behavior:url(#default#VML);}
w\:* {behavior:url(#default#VML);}
.shape {behavior:url(#default#VML);}
</style>
<![endif]-->
<title>SpethWARE Sequencer</title>
<o:SmartTagType namespaceuri="urn:schemas-microsoft-com:office:smarttags"
 name="place"/>
<!--[if gte mso 9]><xml>
 <o:DocumentProperties>
  <o:Author>jspeth</o:Author>
  <o:LastAuthor>jspeth</o:LastAuthor>
  <o:Revision>6</o:Revision>
  <o:TotalTime>18</o:TotalTime>
  <o:Created>2005-02-14T02:12:00Z</o:Created>
  <o:LastSaved>2012-10-17T00:20:00Z</o:LastSaved>
  <o:Pages>1</o:Pages>
  <o:Words>888</o:Words>
  <o:Characters>5065</o:Characters>
  <o:Company>SpethWARE</o:Company>
  <o:Lines>42</o:Lines>
  <o:Paragraphs>11</o:Paragraphs>
  <o:CharactersWithSpaces>5942</o:CharactersWithSpaces>
  <o:Version>11.9999</o:Version>
 </o:DocumentProperties>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:WordDocument>
  <w:ValidateAgainstSchemas/>
  <w:SaveIfXMLInvalid>false</w:SaveIfXMLInvalid>
  <w:IgnoreMixedContent>false</w:IgnoreMixedContent>
  <w:AlwaysShowPlaceholderText>false</w:AlwaysShowPlaceholderText>
  <w:BrowserLevel>MicrosoftInternetExplorer4</w:BrowserLevel>
 </w:WordDocument>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:LatentStyles DefLockedState="false" LatentStyleCount="156">
 </w:LatentStyles>
</xml><![endif]--><!--[if !mso]><object
 classid="clsid:38481807-CA0E-42D2-BF39-B33AF135CC4D" id=ieooui></object>
<style>
st1\:*{behavior:url(#ieooui) }
</style>
<![endif]-->
<style>
<!--
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{mso-style-parent:"";
	margin:0in;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;
	text-underline:single;}
a:visited, span.MsoHyperlinkFollowed
	{color:purple;
	text-decoration:underline;
	text-underline:single;}
p
	{mso-margin-top-alt:auto;
	margin-right:0in;
	mso-margin-bottom-alt:auto;
	margin-left:0in;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
@page Section1
	{size:8.5in 11.0in;
	margin:1.0in 1.25in 1.0in 1.25in;
	mso-header-margin:.5in;
	mso-footer-margin:.5in;
	mso-paper-source:0;}
div.Section1
	{page:Section1;}
-->
</style>
<!--[if gte mso 10]>
<style>
 /* Style Definitions */
 table.MsoNormalTable
	{mso-style-name:"Table Normal";
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	mso-style-noshow:yes;
	mso-style-parent:"";
	mso-padding-alt:0in 5.4pt 0in 5.4pt;
	mso-para-margin:0in;
	mso-para-margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:"Times New Roman";
	mso-ansi-language:#0400;
	mso-fareast-language:#0400;
	mso-bidi-language:#0400;}
</style>
<![endif]-->
<meta name=Template content="C:\PROGRAM FILES\MICROSOFT MONEY\OFFICE\html.dot">
<!--[if gte mso 9]><xml>
 <o:shapedefaults v:ext="edit" spidmax="7170"/>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <o:shapelayout v:ext="edit">
  <o:idmap v:ext="edit" data="1"/>
 </o:shapelayout></xml><![endif]-->
</head>

<body bgcolor=white background=SpethSegBG.JPG lang=EN-US link=blue
vlink=purple style='tab-interval:.5in' bgproperties=fixed>

<div class=Section1>

<p><b><span style='font-size:18.0pt'>SpethWARE Sequencer</span></b></p>

<p><span style='font-size:10.0pt'>By John J Speth - 3/30/2005</span></p>

<p><a href="#Intro">Introduction</a></p>

<p><a href="#Discuss">Design Discussion</a></p>

<p><a href="#Construct">Construction</a></p>

<p><a href="#Cal">Calibration</a></p>

<p><a href="#SW">Software</a></p>

<p><a href="#Future">Future Work</a></p>

<p><a href="#Pics">Pictures</a></p>

<p><a href="#Contact">Contact</a></p>

<p><a name=Intro></a><b>Introduction:</b></p>

<blockquote style='margin-top:5.0pt;margin-bottom:5.0pt'>

<p><span style='font-size:10.0pt'>This article is a rough description of my
contribution to the world's body of sequencer designs. It's the familiar
2x8/1x16 design that has been optimized for use with a keyboard or other gate
signal. </span></p>

<p><span style='font-size:10.0pt'>The sequencer engine has lots of selectable
features: manual step, run/stop mode, up-down/up mode, one-shot mode,
return-to-zero mode, and random mode. Each stage can be configured as play,
skip, or pause. LEDs light brightly for the playing stage and dimly for the
pausing stage. Both rows have a step-out signal.</span></p>

<p><span style='font-size:10.0pt'>A unique part of the circuit (at least I've
never heard of it) is the clock divider. I originally wanted an analog
controlled step clock in my circuit. One day I realized that I could avoid
integrating a VCO in the sequencer and instead make a smart clock divider that
can be driven by an audio range VCO to step a clock at sequencer rates. The
clock driver is syncable to a gate signal so that a step pulse is generated as
soon as possible after the gate asserts. The divide rate is controllable using
a 10-turn pot. The software spreads the 1-24 divider values over a large
turning range of the pot to make selecting those values easier. A non-related
MIDI In and Out is featured implementing the <st1:place w:st="on">MIDI</st1:place>
clock, start, stop, and continue commands. There is a switch that selects 24 or
1 clock per <st1:place w:st="on">MIDI</st1:place> clock output.</span></p>

<p><span style='font-size:10.0pt'>The logic section is implemented entirely
from MicroChip PICs. The analog section is the simplest design of an array of
potentiometers feeding voltages to an addressable analog multiplexer consisting
of CD405X analog switches.</span></p>

</blockquote>

<p><a name=Discuss></a><b>Design Discussion:</b></p>

<blockquote style='margin-top:5.0pt;margin-bottom:5.0pt'>

<p><span style='font-size:10.0pt'>The design is broken down into several
logical sections: the engine, LED controllers, switch scanner, clock
divider/MIDI, and the analog output. See the </span><a href="BlockDiagram.pdf"><span
style='font-size:10.0pt'>block diagram</span></a><span style='font-size:10.0pt'>.</span></p>

<p><span style='font-size:10.0pt'>The </span><a href="EngineSchematic.pdf"><span
style='font-size:10.0pt'>engine</span></a><span style='font-size:10.0pt'>
provides the logical smarts that provide the sequencing functions. The </span><a
href="ScanSchematic.pdf"><span style='font-size:10.0pt'>scanner</span></a><span
style='font-size:10.0pt'> actively scans the switches which consist of the row
play/skip/pause switches and the various option switches. The engine
periodically queries the scanner for switch states. The </span><a
href="LedSchematic.pdf"><span style='font-size:10.0pt'>LED controller</span></a><span
style='font-size:10.0pt'> drives the appropriate LEDs according to commands
from the engine. The <a href="AnalogConvSchematic.pdf">analog output circuit</a>
selects and scales the engine selected output stages. The </span><a
href="GateDivSchematic.pdf"><span style='font-size:10.0pt'>clock divider</span></a><span
style='font-size:10.0pt'> divides the VCO clock ranging from /1 to /1023. It
also provides <st1:place w:st="on">MIDI</st1:place> clock and sync input and
output functionality.</span></p>

<p><span style='font-size:10.0pt'>The engine circuit presented here includes an
LCD display. I originally thought a display might be a good idea but later
discovered I couldn't find any useful purpose for it. The software I wrote
paints a &quot;SpethWARE Sequencer&quot; banner and nothing more. The full LCD
API is in the source code and preserved for posterity.</span></p>

</blockquote>

<p><a name=Construct></a><b>Construction:</b></p>

<blockquote style='margin-top:5.0pt;margin-bottom:5.0pt'>

<p><span style='font-size:10.0pt'>The schematics are not complete production
ready design documents. They serve to show the major connections and parts
using the prototyping system I used to develop the circuit (wire-wrapping and
ribbon cables mostly). The power supply bypass caps are not shown. I followed
basic tried-and-true building techniques with no special care taken in laying
out and building the circuit (not consciously anyway). I suggest all PICs be
socketed to accommodate reprogramming if necessary.</span></p>

</blockquote>

<p><a name=Cal></a><b>Calibration:</b></p>

<blockquote style='margin-top:5.0pt;margin-bottom:5.0pt'>

<p><span style='font-size:10.0pt'>No calibration is required. It is a good idea
to use a dual quantizer on the output voltages if the sequencer is to be used
to drive audio range VCOs.</span></p>

</blockquote>

<p><a name=SW></a><b>Software:</b></p>

<blockquote style='margin-top:5.0pt;margin-bottom:5.0pt'>

<p><span style='font-size:10.0pt'>The source code is written in C, which really
sped up code development. Programming code (hex code) is generated using the </span><a
href="http://www.bknd.com/cc5x/index.shtml"><span style='font-size:10.0pt'>CC5X
C Compiler</span></a><span style='font-size:10.0pt'> from B Knudsen Data.</span></p>

<p><span style='font-size:10.0pt'>The PICs must be programmed before use. The
hex code may be programmed into the PICs using any appropriate PIC programmer.
I used the excellent and affordable Warp13 programmer. The engine circuit
features in-circuit programming accommodations but that's not required if the
engine PIC is to be programmed once.</span></p>

<p><span style='font-size:10.0pt'>Source code can be found at:</span></p>

<p><span style='font-size:10.0pt'>Engine: </span><a
href="Engine.zip"><span
style='font-size:10.0pt'>Engine.zip</span></a></p>

<p><span style='font-size:10.0pt'>Scanner: <a
href="Scanner.zip">Scanner.zip</a></span></p>

<p><span style='font-size:10.0pt'>LED controller: <a
href="LEDController.zip">LEDController.zip</a></span></p>

<p><span style='font-size:10.0pt'>Clock divider: <a
href="GateDiv.zip">GateDiv.zip</a></span></p>

</blockquote>

<p><a name=Future></a><b>Future Work:</b></p>

<blockquote style='margin-top:5.0pt;margin-bottom:5.0pt'>

<p><span style='font-size:10.0pt'>A major consideration of the design was
addressing the massive wiring problem of the row pots, LEDs, and switches. If
the sequencer were to be built using a single main board, the wiring problem
would exist. However, using intelligent logic (that is, PICs), it is possible
to distribute the LED and switch scanning functions away from a single main
board. It is possible to reallocate the LED controller and switch scanner
functions into a single PIC for each row.</span></p>

</blockquote>

<p><a name=Pics></a><b>Pictures:</b></p>

<blockquote style='margin-top:5.0pt;margin-bottom:5.0pt'>

<p><span style='font-size:10.0pt'>Here is a </span><a href="SpethSegS.JPG"><span
style='font-size:10.0pt'>lo-res picture</span></a><span style='font-size:10.0pt'>
or a </span><a href="SpethSegL.JPG"><span style='font-size:10.0pt'>hi-res
picture (1 Meg)</span></a><span style='font-size:10.0pt'> of my breadboard
unit. It's not pretty but works very well. As we all learn in building such a
project, it's the panel that will be the big cost item if I ever make a nice
panel for it. I would estimate that the whole breadboard cost me less than $50
not counting the jacks, pots, and switches.</span></p>

</blockquote>

<p>&nbsp;<o:p></o:p></p>

<p class=MsoNormal><script language="JavaScript"  type="text/javascript">
var sc_project=1715790;
var sc_invisible=0;
var sc_partition=16;
var sc_security="bd3fa7dd";
</script><!-- Start of StatCounter Code --><script language="JavaScript"  type="text/javascript" src="http://www.statcounter.com/counter/counter.js">
</script><a href="http://www.statcounter.com/" target="_blank"><noscript><span
style='text-decoration:none;text-underline:none'><img border=0 width=60
height=14 id="_x0000_i1027"
src="http://c17.statcounter.com/counter.php?sc_project=1715790&amp;java=0&amp;security=bd3fa7dd&amp;invisible=0"
alt="free invisible hit counter"></span></a></p>

</noscript><!-- End of StatCounter Code --></div>

</body>

</html>
